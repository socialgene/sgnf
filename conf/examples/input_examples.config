/*
    Use as follows:
        // The curl command downloads MIBiG BGC0000001 from Genbank
        curl -s "https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=nuccore&id=JF752342.1&rettype=gbwithparts&retmode=text" | gzip > "/tmp/JF752342.1.gb.gz"




            outdir='/home/chase/Documents/socialgene_data/klebsiella'
            outdir_download_cache='/home/chase/Documents/socialgene_data/cache'

            nextflow run . \
                -profile input_examples,docker \
                --outdir $outdir \
                --outdir_download_cache $outdir_download_cache \
                -resume


----------------------------------------------------------------------------------------
*/

params {
        // Use the downloaded BGC0000001 as input
       local_genbank = '/home/chase/Downloads/aaaaaa/*.gz'
       genbank_input_buffer = 11520

    /*
    ////////////////////////
    set which modules to run+
    ////////////////////////
    */
        antismash       = true
        mibig           = false
        mmseqs2         = true
        blastp          = true // only set to true for small datasets or if you know what you're doing
        ncbi_taxonomy   = true
        build_database  = true
        hmmlist         = ["antismash","amrfinder","pfam","prism","resfams","tigrfam"]

    /*
    ////////////////////////
    adjust per your computer
    ////////////////////////
    */
        fasta_splits                = 23
        max_cpus                    = 23
        max_memory                  = '62.GB'
        max_time                    = 6000.h

}


process {

    withName:'DIAMOND_BLASTP'{
       ext.args = "-k0 --max-hsps 1 --query-cover 70 --subject-cover 70 --id 50 --block-size 6 --fast"
    }
        withName:'MMSEQS2_CLUSTER'{
       // https://github.com/soedinglab/mmseqs2/wiki#how-to-set-the-right-alignment-coverage-to-cluster
       ext.args = '--single-step-clustering 1'
       ext.args2 = '--min-seq-id 0.5 -c 0.7 --cov-mode 0'
    }
}
