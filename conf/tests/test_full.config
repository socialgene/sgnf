/*
========================================================================================
    Nextflow config file for running minimal tests
========================================================================================

    Use as follows:

        outdir=$(mktemp -d)
        outdir_download_cache=$outdir/outdir_download_cache
        mkdir -p $outdir/socialgene_per_run

        nextflow run . \
            -profile test_full,docker \
            --outdir $outdir \
            -resume \
            --outdir_download_cache $outdir_download_cache

        ./bin/test.py --sg_outdir $outdir

        rm -r $outdir
----------------------------------------------------------------------------------------
*/

params {

    ncbi_genome_download_command = '-s refseq --assembly-accessions GCF_000005845.2,GCF_007821455.1,GCF_012570145.1 bacteria'

    sort_fasta = true
    /*
    ////////////////////////
    set which modules to run
    ////////////////////////
    */

        mmseqs2         = true
        blastp          = true
        hmmlist         = ["antismash","amrfinder","pfam","resfams","tigrfam"] // these are the most reliable / smallest (other than pfam)
        ncbi_taxonomy   = true
        antismash       = true
        build_database  = true
    /*
    ////////////////////////
    adjust per your computer
    ////////////////////////
    */
        fasta_splits                = 23
        max_cpus                    = 23
        max_memory                  = '10 GB'
        max_time                    = 1.h
}


process {

    withName:DIAMOND_BLASTP {
        cpus = 24
        ext.args = "-k0 --max-hsps 1 --query-cover 90 --subject-cover 90 --id 90  --fast"
    }

    withName:'MMSEQS2_EASYCLUSTER'{
       ext.args = '--min-seq-id 0.9 -c 0.9 --cov-mode 0'
    }
}
